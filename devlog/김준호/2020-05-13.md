# 2020-05-13 김준호

## 1. 오늘 한 일

### 1.JWT(Json Web Token)

몇 가지 클레임을 주장하는 JSON 기반 액세스 토큰을 만들기위한 인터넷 표준입니다. 

토큰은 개인 비밀 또는 공개 / 개인 키를 사용하여 서명됩니다.

- 현재 jwt의 기간은 하루이며 연장이 가능합니다.
- jwt의 최대기간은 31일입니다.



### 2. 로그인

- djangorestframework-jwt를 사용

- 로그인을하면 jwt를 반환합니다.



### 3. 업데이트 및 삭제

- 로그인의 결과로 가져온 jwt를 사용합니다.
- jwt에 담겨있는 user를 기반으로 업데이트 하거나 삭제합니다.



### 4.암호변경

- 암호변경 역시 로그인의 결과로 가져온 jwt를 사용합니다.
- 또한 현재 비밀번호(original_password)와 바꿀 비밀번호(password)를 jwt로 인코딩한 값을 응답으로 받습니다.
  - jwt인코딩을 할 시에는 backend에서 사용하는 secretkey와 같은 값이 필요합니다.
  - 
- 이후 현재 비밀번호를 체크하고 유효성 검사 후에 비밀번호가 변경됩니다.



### 4.수정사항

- `some_queryset.filter(pk=id).first()` 를 `some_queryset.filter(pk=entry.pk).exists()`로 변경하였습니다. exists는 최소한 한가지의 레코드가 존재하는지를 확인하여 알려줍니다.
  - 이후 get을 이용하여 처리하였습니다.
- 회원가입에서 인증시간을 확인합니다.
  - 회원가입시 인증시간이 지난 인증은 사용하실 수 없습니다.





## 2. 느낀점

 이제야 jwt를 사용하고자 생각이 들었습니다. jwt를 이용해서 안정성을 높일수 있다고 생각합니다. 



 이제야 유저의 CRUD가 끝을 보이는듯 합니다.  처음에는 간단하게 끝날것같았던 작업이 이것저것을 고려하며 복잡해지고있습니다. 올바른 방향이라고 생각합니다.



jwt를 encode와 decode를 하며 처음으로 jwt를 만져본듯합니다. decode를 할때 많은 에러가 생겻습니다. 이제 조금 익숙해진듯 합니다.





